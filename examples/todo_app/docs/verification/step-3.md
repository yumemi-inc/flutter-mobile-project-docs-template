# ステップ3：永続化とリマインダー機能の追加仕様書

ここでは、アプリを閉じてもデータが失われないように永続化を強化し、さらにリマインダー機能を追加します。

## TODOアプリ機能追加仕様書：データ永続化とリマインダー

## 1. 目的

ユーザーがアプリを閉じてもタスクデータが保持されるように永続化を強化し、重要なタスクを見逃さないようにリマインダー機能を追加します。

## 2. 変更・追加機能

### 2.1. データ永続化の強化 (変更)

* タスクデータをデバイス内に永続的に保存する。
* アプリの起動時に自動的にデータをロードし、終了時に自動的にデータを保存する。
* **変更点:** `shared_preferences` から **`sqflite` (SQLiteデータベース)** へデータ永続化方法を変更する。

### 2.2. リマインダー設定 (新規追加)

* 各タスクに対して、任意のリマインダー日時を設定できる。
* リマインダー日時が来たら、デバイスの通知機能を通じてユーザーに通知する。
* リマインダーは複数設定できないものとする（1タスクにつき1つまで）。

## 3. 画面遷移 (変更・追加)

### 3.1. タスク追加/編集画面 (変更)

* リマインダー日時を設定するための日時ピッカーを追加。
* リマインダー設定のON/OFFを切り替えるトグルスイッチを追加。

## 4. データモデル (変更)

* **Task:**
  * `id`:
  * `title`:
  * `description`:
  * `isCompleted`:
  * `createdAt`:
  * `updatedAt`:
  * **`reminderDateTime`**: リマインダー日時 (DateTime, Nullable) (新規追加)

## 5. 使用技術（Flutter） (変更)

* **データ永続化:** `sqflite` (SQLiteデータベース)
* **通知機能:** `flutter_local_notifications` パッケージ
