<!--
<action>
- <content>の内容を解析し、<template>に順守したドキュメントを作成してください。
</action>

<prohibited>
- コメントアウトは変更しないでください
</prohibited>

---

<template>
# 1. 概要 (Overview / Introduction)
* **目的 (Purpose):** この機能が解決する課題や、提供する価値、目標を簡潔に記述します。
* **対象範囲 (Scope):** このドキュメントが扱う機能の範囲を明確にします。何を含み、何を含まないかを定義します。
* **対象読者 (Audience):** このドキュメントを読むであろう人々（開発者、テスター、企画者など）を特定します。

# 2. 機能一覧 (Feature List / High-Level Features)
* 開発する主要な機能を網羅的にリストアップします。ここでは詳細な説明はせず、機能の名称と簡単な説明に留めます。

# 3. 各機能の詳細仕様 (Detailed Feature Specifications)
ここが機能仕様書の核となる部分です。機能ごとにセクションを設け、以下の項目を記述します。

* **機能名 (Feature Name):** 各機能の明確な名称。
* **機能概要 (Feature Summary):** その機能が何をするものなのかを簡潔に説明します。
* **対象ユーザー (Target Users):** その機能を利用するユーザー層を特定します。
* **画面遷移 / UI (Screen Transition / User Interface):**
    * 関連する画面構成やレイアウトの概要。
    * 画面上の要素（ボタン、入力フィールドなど）とその役割。
    * 画面間の遷移ロジック。
    * （必要であればワイヤーフレームや画面イメージの添付）
* **操作手順 (User Flow / User Actions):** ユーザーがその機能を利用する際の一連の操作の流れをステップバイステップで記述します。
* **入力項目とその規則 (Input Fields & Validation Rules):**
    * ユーザーが入力する項目名、データ型、最大文字数、必須/任意、デフォルト値などを定義。
    * 各入力項目に対するバリデーション（入力値検証）ルールと、エラー発生時のメッセージ。
* **出力 / 結果 (Output / Results):**
    * 機能実行後に表示される情報や、生成されるデータ。
    * 成功時、失敗時それぞれの結果。
* **ビジネスロジック (Business Logic):**
    * 機能が内部でどのように処理されるかのロジック。計算式、条件分岐、データ処理の流れなど。
    * 特定のルールや制約があれば明記します。
* **エラーハンドリング (Error Handling):**
    * 発生しうるエラーの種類と、それぞれのエラーに対するシステム（アプリ）の応答（エラーメッセージ表示、処理の中断など）。
* **非機能要件 (Non-Functional Requirements):**
    * **パフォーマンス:** 応答速度、同時接続数など。
    * **セキュリティ:** データの暗号化、脆弱性対策、認証・認可に関する要件。
    * **可用性:** システムの安定性、バックアップ、復旧計画など。
    * **拡張性:** 将来的な機能追加への考慮。
    * **保守性:** メンテナンスのしやすさ。
    * **アクセシビリティ:** 身体的制約のあるユーザーへの配慮。
    * **多言語対応:** 必要であれば言語設定など。

# 4. データ構造 (Data Structure)
* 機能に関連する主要なデータエンティティとその属性、リレーションシップの概要。
* （データベース設計書がある場合はそちらを参照する形でも可）

# 5. 外部連携 (External Integrations / APIs)
* 外部サービスやAPIとの連携がある場合に、そのインターフェースやデータフォーマット、連携フローなどを記述します。

# 6. その他考慮事項 (Other Considerations)
* 今後の拡張予定、未決定事項、議論が必要な点など。
* 既知の制約や制限事項。

# 7. 用語集 (Glossary)
* ドキュメント内で使用される専門用語や略語の定義。

# 8. 改訂履歴 (Revision History)
* ドキュメントの作成日、改訂日、改訂内容、作成者/改訂者を記録します。
</template>
-->

<!--
本コメントはテンプレートのため、人間に対し説明するためのコメントである。
120行目から240行目の5ステップをCursorで実施した結果に対する実施記録である。

1. テキストエディタに80行目から114行目の内容を記載する
2. 1の内容を選択し、Cursorの`Quick Edit`機能を起動する
3. 2の入力欄に「<action>」と指示する
4. 3で提案された内容を全てApproveする
5. 文章の前後に<content> が残っていたため、<content>と</content> を削除

---
<content>
### ログイン機能 - 箇条書きリスト

* **アカウント登録 (Sign Up)**
    * ユーザーはメールアドレスとパスワードで新規アカウントを作成できる。
    * パスワードは一定のセキュリティ要件（例：8文字以上、英数字記号の組み合わせ）を満たす必要がある。
    * 登録済みのメールアドレスは使用できない。
    * 登録完了後、確認メールを送信する（オプション）。

* **ログイン (Log In)**
    * 登録済みのメールアドレスとパスワードでログインできる。
    * 入力された認証情報が不正な場合、エラーメッセージを表示する。
    * 一定回数ログインに失敗した場合、アカウントロックや一時的なログイン制限を行う。
    * ログイン状態を維持する「ログイン保持」機能（任意）。

* **ログアウト (Log Out)**
    * ユーザーはアプリからログアウトできる。
    * ログアウトすると、セッション情報が破棄され、ログイン状態が解除される。

* **パスワード再設定 (Password Reset)**
    * パスワードを忘れた場合、登録済みのメールアドレス宛に再設定用リンクを送信できる。
    * 再設定用リンクの有効期限を設定する。
    * リンクから新しいパスワードを設定できる。

* **セキュリティ**
    * パスワードはハッシュ化して安全に保存する。
    * 通信はHTTPS/SSLで暗号化する。
    * セッション管理を適切に行い、セッションハイジャックなどへの対策を行う。
    * SQLインジェクションやクロスサイトスクリプティング（XSS）などの脆弱性対策を行う。

* **UI/UX**
    * 直感的で分かりやすいログイン/登録フォーム。
    * エラー発生時に、明確なエラーメッセージと適切なフィードバックを表示する。
    * パスワードの表示/非表示切り替え機能（任意）。
</content>
-->

# 1. 概要 (Overview / Introduction)

* **目的 (Purpose):** ユーザー認証システムを提供し、アプリケーションへの安全なアクセスを確保する。
* **対象範囲 (Scope):** アカウント登録、ログイン、ログアウト、パスワード再設定の基本認証機能。
* **対象読者 (Audience):** 開発者、セキュリティ担当者、UI/UXデザイナー。

# 2. 機能一覧 (Feature List)

* アカウント登録機能
* ログイン機能
* ログアウト機能
* パスワード再設定機能
* セキュリティ機能
* UI/UX機能

# 3. 各機能の詳細仕様 (Detailed Feature Specifications)

## 3.1 アカウント登録 (Sign Up)

* **機能名 (Feature Name):** アカウント登録
* **機能概要 (Feature Summary):** 新規ユーザーがアプリケーションを使用するためのアカウントを作成する機能
* **対象ユーザー (Target Users):** 新規ユーザー
* **画面遷移 / UI (Screen Transition / User Interface):**
  * アカウント登録フォーム画面
  * 確認メール送信完了画面
* **操作手順 (User Flow / User Actions):**
  1. メールアドレスとパスワードを入力
  2. 入力内容の確認
  3. 登録ボタンクリック
  4. 確認メール送信（オプション）
* **入力項目とその規則 (Input Fields & Validation Rules):**
  * メールアドレス
    * 形式: 有効なメールアドレス形式
    * 必須: はい
    * 重複チェック: あり
  * パスワード
    * 最小長: 8文字
    * 必須: はい
    * 要件: 英数字記号の組み合わせ
* **出力 / 結果 (Output / Results):**
  * 成功: 登録完了メッセージと確認メール送信通知
  * 失敗: エラーメッセージ（入力エラー、重複エラーなど）

## 3.2 ログイン (Log In)

* **機能名 (Feature Name):** ログイン
* **機能概要 (Feature Summary):** 登録済みユーザーがアプリケーションにアクセスするための認証機能
* **対象ユーザー (Target Users):** 登録済みユーザー
* **画面遷移 / UI (Screen Transition / User Interface):**
  * ログインフォーム画面
  * ホーム画面（ログイン成功時）
* **操作手順 (User Flow / User Actions):**
  1. メールアドレスとパスワードを入力
  2. ログインボタンクリック
  3. 認証処理
  4. ホーム画面へ遷移
* **入力項目とその規則 (Input Fields & Validation Rules):**
  * メールアドレス: 必須
  * パスワード: 必須
  * ログイン保持: 任意
* **ビジネスロジック (Business Logic):**
  * 認証情報の検証
  * セッション管理
  * ログイン失敗回数のカウント
* **エラーハンドリング (Error Handling):**
  * 認証エラー: エラーメッセージ表示
  * アカウントロック: 一定回数の失敗で一時的なロック

## 3.3 ログアウト (Log Out)

* **機能名 (Feature Name):** ログアウト
* **機能概要 (Feature Summary):** ユーザーセッションを終了する機能
* **対象ユーザー (Target Users):** ログイン中のユーザー
* **操作手順 (User Flow / User Actions):**
  1. ログアウトボタンクリック
  2. セッション破棄
  3. ログイン画面へ遷移

## 3.4 パスワード再設定 (Password Reset)

* **機能名 (Feature Name):** パスワード再設定
* **機能概要 (Feature Summary):** パスワードを忘れたユーザーのための再設定機能
* **対象ユーザー (Target Users):** パスワードを忘れたユーザー
* **操作手順 (User Flow / User Actions):**
  1. メールアドレス入力
  2. 再設定用リンク送信
  3. メールからリンクをクリック
  4. 新しいパスワード設定

# 4. 非機能要件 (Non-Functional Requirements)

* **セキュリティ:**
  * パスワードのハッシュ化保存
  * HTTPS/SSL通信
  * セッション管理の適切な実装
  * 脆弱性対策（SQLインジェクション、XSS等）
* **UI/UX:**
  * 直感的なフォームデザイン
  * 明確なエラーメッセージ
  * パスワード表示/非表示切り替え機能

# 5. データ構造 (Data Structure)

* ユーザー情報
  * メールアドレス
  * パスワード（ハッシュ化）
  * アカウント状態
  * 最終ログイン日時

# 6. 外部連携 (External Integrations / APIs)

* メール送信サービス（確認メール、パスワード再設定用）

# 7. 用語集 (Glossary)

* セッション: ユーザーのログイン状態を管理する一時的な情報
* ハッシュ化: パスワードを不可逆的に変換する処理

# 8. 改訂履歴 (Revision History)

* 初版作成: YYYY/MM/DD
