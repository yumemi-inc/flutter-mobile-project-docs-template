# 機能仕様書テンプレート

本ディレクトリは機能仕様書のテンプレートファイルが保存されている。

## ルール

- 機能とドキュメント(Markdownファイル)は1対1の関係性であること
- `Cursor`上でドキュメントを作成すること

## 執筆方法

`Anthropic`社が公開している[Use XML tags to structure your prompts](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering/use-xml-tags) に準拠し、生成AIの活用を前提として執筆する。

> [!NOTE]
> Cursorでの執筆を前提とするが、ChatGPTやGeminiなどのチャットツールでも本ドキュメントの内容を活用すれば実施可能だと思われる。

### 1. ファイルを作成する

機能単位で`.md`が拡張子のファイルを作成する。
その後、ファイルの先頭に下記の内容をペーストすること。

```md
<!--
<action>
- <content>の内容を解析し、<template>に順守したドキュメントを作成してください。
</action>

<prohibited>
- コメントアウトは変更しないでください
</prohibited>

---

<template>
# 1. 概要 (Overview / Introduction)
* **目的 (Purpose):** この機能が解決する課題や、提供する価値、目標を簡潔に記述します。
* **対象範囲 (Scope):** このドキュメントが扱う機能の範囲を明確にします。何を含み、何を含まないかを定義します。
* **対象読者 (Audience):** このドキュメントを読むであろう人々（開発者、テスター、企画者など）を特定します。

# 2. 機能一覧 (Feature List / High-Level Features)
* 開発する主要な機能を網羅的にリストアップします。ここでは詳細な説明はせず、機能の名称と簡単な説明に留めます。

# 3. 各機能の詳細仕様 (Detailed Feature Specifications)
ここが機能仕様書の核となる部分です。機能ごとにセクションを設け、以下の項目を記述します。

* **機能名 (Feature Name):** 各機能の明確な名称。
* **機能概要 (Feature Summary):** その機能が何をするものなのかを簡潔に説明します。
* **対象ユーザー (Target Users):** その機能を利用するユーザー層を特定します。
* **画面遷移 / UI (Screen Transition / User Interface):**
    * 関連する画面構成やレイアウトの概要。
    * 画面上の要素（ボタン、入力フィールドなど）とその役割。
    * 画面間の遷移ロジック。
    * （必要であればワイヤーフレームや画面イメージの添付）
* **操作手順 (User Flow / User Actions):** ユーザーがその機能を利用する際の一連の操作の流れをステップバイステップで記述します。
* **入力項目とその規則 (Input Fields & Validation Rules):**
    * ユーザーが入力する項目名、データ型、最大文字数、必須/任意、デフォルト値などを定義。
    * 各入力項目に対するバリデーション（入力値検証）ルールと、エラー発生時のメッセージ。
* **出力 / 結果 (Output / Results):**
    * 機能実行後に表示される情報や、生成されるデータ。
    * 成功時、失敗時それぞれの結果。
* **ビジネスロジック (Business Logic):**
    * 機能が内部でどのように処理されるかのロジック。計算式、条件分岐、データ処理の流れなど。
    * 特定のルールや制約があれば明記します。
* **エラーハンドリング (Error Handling):**
    * 発生しうるエラーの種類と、それぞれのエラーに対するシステム（アプリ）の応答（エラーメッセージ表示、処理の中断など）。
* **非機能要件 (Non-Functional Requirements):**
    * **パフォーマンス:** 応答速度、同時接続数など。
    * **セキュリティ:** データの暗号化、脆弱性対策、認証・認可に関する要件。
    * **可用性:** システムの安定性、バックアップ、復旧計画など。
    * **拡張性:** 将来的な機能追加への考慮。
    * **保守性:** メンテナンスのしやすさ。
    * **アクセシビリティ:** 身体的制約のあるユーザーへの配慮。
    * **多言語対応:** 必要であれば言語設定など。

# 4. データ構造 (Data Structure)
* 機能に関連する主要なデータエンティティとその属性、リレーションシップの概要。
* （データベース設計書がある場合はそちらを参照する形でも可）

# 5. 外部連携 (External Integrations / APIs)
* 外部サービスやAPIとの連携がある場合に、そのインターフェースやデータフォーマット、連携フローなどを記述します。

# 6. その他考慮事項 (Other Considerations)
* 今後の拡張予定、未決定事項、議論が必要な点など。
* 既知の制約や制限事項。

# 7. 用語集 (Glossary)
* ドキュメント内で使用される専門用語や略語の定義。

# 8. 改訂履歴 (Revision History)
* ドキュメントの作成日、改訂日、改訂内容、作成者/改訂者を記録します。
</template>
-->
```

### 2. 下書きを作成する

機能仕様書で書きたい内容について、箇条書きで作成する。

> [!IMPORTANT]
> `Markdown記法の箇条書きリストを使い、ネストを意識した書き方をすること。

#### 例

```md
### ログイン機能 - 箇条書きリスト

* **アカウント登録 (Sign Up)**
    * ユーザーはメールアドレスとパスワードで新規アカウントを作成できる。
    * パスワードは一定のセキュリティ要件（例：8文字以上、英数字記号の組み合わせ）を満たす必要がある。
    * 登録済みのメールアドレスは使用できない。
    * 登録完了後、確認メールを送信する（オプション）。

* **ログイン (Log In)**
    * 登録済みのメールアドレスとパスワードでログインできる。
    * 入力された認証情報が不正な場合、エラーメッセージを表示する。
    * 一定回数ログインに失敗した場合、アカウントロックや一時的なログイン制限を行う。
    * ログイン状態を維持する「ログイン保持」機能（任意）。

* **ログアウト (Log Out)**
    * ユーザーはアプリからログアウトできる。
    * ログアウトすると、セッション情報が破棄され、ログイン状態が解除される。

* **パスワード再設定 (Password Reset)**
    * パスワードを忘れた場合、登録済みのメールアドレス宛に再設定用リンクを送信できる。
    * 再設定用リンクの有効期限を設定する。
    * リンクから新しいパスワードを設定できる。

* **セキュリティ**
    * パスワードはハッシュ化して安全に保存する。
    * 通信はHTTPS/SSLで暗号化する。
    * セッション管理を適切に行い、セッションハイジャックなどへの対策を行う。
    * SQLインジェクションやクロスサイトスクリプティング（XSS）などの脆弱性対策を行う。

* **UI/UX**
    * 直感的で分かりやすいログイン/登録フォーム。
    * エラー発生時に、明確なエラーメッセージと適切なフィードバックを表示する。
    * パスワードの表示/非表示切り替え機能（任意）。
```

### 3 Quick Edit機能で書き直す

2で作成した下書きの先頭に`<content>`、文末に`</content>` を追加し、`<content>`から`</content>` の範囲を選択する。
その後、`Quick Edit`を起動し、入力欄に **「`<action>`」** と入力し、実行する。
生成AIが`<content>`から`</content>`の内容を確認し、文章を書き直すため、成果物に問題がなければ`Approve` する。

(生成後の成果物に`<content>`が残ることが多いため、は残る場合は手動で削除する)

> [!TIP]
> 選択するmodelは`Auto`で問題ない

#### 例

![図1](https://github.com/user-attachments/assets/a893f90a-64de-48ea-a626-da982ad66622)
