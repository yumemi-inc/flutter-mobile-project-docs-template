# 認証フロー画面遷移図

## 概要

<!--
このドキュメントでは、アプリケーションの認証に関連する画面遷移を詳細に記載します。
ユーザー認証、アカウント登録、パスワードリセットなどの認証関連機能の画面遷移フローを定義します。
メインの[画面遷移図](./screen_flow.md)の一部として参照されます。
-->

このドキュメントでは、アプリケーションの認証機能に関連する画面遷移を定義します。
ログイン、メンテナンス画面などの認証関連機能を網羅し、ユーザー認証状態による条件分岐も記載しています。

## 認証フロー詳細

### 初期認証フロー

```mermaid
graph TD
    A([アプリ起動]) --> SC001(ログイン画面)
    SC001 -- "ログイン成功" --> SC002(ホーム画面)
    SC001 -- "メンテナンス中" --> SC009(メンテナンス画面)
    SC009 -- "戻る" --> SC001
```

### メンテナンス画面フロー

```mermaid
graph TD
    SC001(ログイン画面) -- "メンテナンス中" --> SC009(メンテナンス画面)
    SC009 -- "再試行" --> MCheck{メンテナンス確認}
    MCheck -- "終了" --> SC001
    MCheck -- "継続中" --> SC009
    
    SC002(ホーム画面) -- "メンテナンス時間" --> SC009
    SC003(設定画面) -- "メンテナンス時間" --> SC009
```

### エラーハンドリング

```mermaid
graph TD
    SC001(ログイン画面) -- "認証エラー" --> AuthError[認証エラーダイアログ]
    AuthError -- "再試行" --> SC001
    
    SC001 -- "通信エラー" --> ConnError[通信エラーダイアログ]
    ConnError -- "再試行" --> SC001
    ConnError -- "キャンセル" --> SC001
```

## 備考

- ログイン試行は連続5回失敗するとアカウントがロックされます
- メンテナンス画面では予定終了時刻を表示します
- アプリ起動時、バックエンドAPIの状態によって適切な画面を表示します
- 認証エラーはエラーコードごとに適切なメッセージを表示します
