<!--
このドキュメントは「セキュリティ要件」のテンプレートです。

【使い方】
- 本テンプレートはアプリのセキュリティ要件（法令順守、認証、アクセス制御、暗号化、監視等）を整理・共有するためのものです。
- 必要に応じて要件を追加・修正してください。
- 用語や表現の統一、重複の回避に注意してください。
- 各項目の記載例や注意点はコメント内に記載しています。実際のプロジェクト要件に合わせて適宜編集してください。
- コメントは記載観点・例・注意点を網羅しています。実装・運用時のガイドとして活用してください。
-->

# セキュリティ要件テンプレート

## セキュリティ要件

<!--
このセクションには、アプリが順守すべき法令・ガイドライン、セキュリティ診断方針、アカウント運用管理の要件を記載します。
- 法令・ガイドライン: 個人情報保護法、GDPR、業界ガイドライン（例: OWASP Mobile Top 10）等、順守対象を明記。
- ストア（App Store/Google Play）ガイドラインも含める。
- セキュリティ診断: リリース前の脆弱性診断、定期診断、診断範囲・ツール・実施主体（例: 外部ベンダー）等を記載。
- アカウント運用管理: アカウント登録・削除・権限管理・パスワードポリシー・多要素認証等の運用方針を明記。
- サーバーサイドとアプリ側の責任分界点も明確に記載してください。
-->

### 順守すべき規定、法令、ガイドライン

<!--
- アプリで順守すべき法令・ガイドライン（個人情報保護法、GDPR、業界ガイドライン、ストアガイドライン等）を明記。
- サーバーサイドで対応するもの、アプリで特別な対応が必要なものを分けて記載。
- クライアントからの指示や追加要件が発生した場合の対応フローも明記。
- 例: 「アプリで個人情報を扱う場合は、プライバシーポリシー表示や同意取得が必要」
-->

- 基本的に、順守すべき規定、法令、ガイドラインに関しては、クライアントのサーバーサイドシステムにおいて、対応がなされるものとする。
- アプリ開発において特別な対応が必要な場合、クライアントより情報提供が行われ、対応に関して協議する。

### セキュリティ診断

<!--
- セキュリティ診断（脆弱性診断）の実施有無、範囲、タイミング、実施主体（第三者機関/社内等）を明記。
- 診断結果の対応方針（重大な脆弱性はリリース前に必ず修正等）や、再診断・定期診断の有無も記載。
- 診断が不要な場合や、別途協議となる場合はその旨も明記。
- 例: 「リリース前に第三者機関で診断、OSアップデート時は再診断」
-->

- 本アプリ開発内では、第三者機関でのセキュリティ診断を行わない。
- 第三者機関による診断が必要な場合は、別途、スケジュールと費用を協議する。

### アカウント運用管理

<!--
- 本番・試験環境のアカウント管理方針（登録・削除・権限管理・パスワード管理等）を明記。
- 機密情報の管理方法、アクセス権限の最小化、アカウントロック・リセット・退会時のデータ削除方針も記載。
- 例: 「本番環境の管理アカウントは厳重に管理、退職者は即時削除」
-->

- 本番、および、試験環境への接続アカウントに関して、細心の注意を払い、機密情報として管理を行う。

## 認証

<!--
このセクションには、アプリで採用する認証方式（例: ID/パスワード、OAuth等）を記載します。
- 認証方式ごとに、認証フローやセキュリティ対策（例: リプレイ攻撃対策、トークン有効期限、バイオメトリクス利用時の注意点等）も明記してください。
- サーバーサイドとアプリ側の責任分界点、認証情報の保存先・有効期限・失効処理も記載。
-->

### 認証方式

<!--
- ID/パスワード認証: 入力時のセキュリティ（マスキング、ペースト制限等）、パスワードポリシー（長さ・複雑性）、リトライ制限、アカウントロック、パスワードリセット手順等。
- 多要素認証（MFA）: ワンタイムパスワード（SMS/メール/アプリ）、プッシュ通知認証等の方式、導入有無、利用シーン。
- 生体認証: Face ID/Touch ID（iOS）、指紋/顔認証（Android）等の利用有無、利用条件、失敗時の代替手段。
-->

- ID/パスワード認証を基本とする。
  - パスワードは8文字以上、英大文字・小文字・数字・記号を含む複雑性を推奨。
  - 入力時はパスワードをマスキングし、ペースト制限やクリップボード利用制限を検討。
  - 一定回数以上の認証失敗でアカウントロック、リトライ制限を設ける。
  - パスワードリセットはメール等によるワンタイムURL方式を採用。

### ログインID/パスワードによる認証（ユーザー登録）

<!--
- 認証フロー: ユーザーがID/パスワードを入力し、API認証後にアクセスキーを発行・端末に保存する流れを明記。
- フローが簡単な場合は文章で、複雑な場合はフロー図（シーケンス図や状態遷移図など）で記載することも検討してください。
-->

- パスワード認証を実施し、ログイン成功時に、APIよりアクセスキーが発行される。
- ユーザーが入力するPINコードと共に、アクセスキーを端末内に保持し、2回目以降の認証に利用する。

## 利用制限

<!--
このセクションには、アプリ内のデータ・機能・プラットフォームへのアクセス制御要件を記載します。
- データアクセス制御: ユーザーごとのデータ分離、権限管理、API認可方式（例: JWT, OAuth）等。
- 機能アクセス制御: 管理者/一般ユーザー等のロールごとの機能制限、特定機能の利用条件等。
- プラットフォームアクセス制限: ルート化/Jailbreak端末での利用制限、エミュレータ検知、開発者モード制限等。
- サーバーサイドとアプリ側の責任分界点も明記。
-->

### データアクセス制御

<!--
- サーバーサイドでアクセス制御が行われている場合、その前提を明記。
- アプリ側での追加制御が不要な場合や、API認可方式（JWT等）を利用する場合はその旨を記載。
- 例: 「API認可はJWTで実施、アプリ側では認証情報の管理のみ」
-->

- サーバーサイドでアクセス制御が行われていることを前提とする。
- 本アプリでは、認証情報によるデータアクセス制限を行わない。

### 機能アクセス制御

<!--
- アカウントごとに利用可能な機能の可否情報がAPIで提供される場合、その取得・反映方法を明記。
- アプリ側での制御内容（UI制御、ボタン非表示等）や、サーバー側との責任分界点も記載。
- 例: 「APIで取得した権限情報に基づき、管理画面ボタンを非表示」
-->

- アカウントに対する機能のアクセス可否情報は、APIによってアプリに提供される。
- 本アプリでは、提供されたアクセス制御情報と元に、ユーザーによる機能の使用を制限。

## データ管理、暗号化

<!--
このセクションには、アプリ内のデータ管理・暗号化方針を記載します。
- 通信の暗号化: HTTPS/TLS強制、API通信の暗号化方式等。
- 永続データ: 端末内保存データ（DB/ファイル等）の暗号化、保存場所、アクセス制御。
- 一時データ: キャッシュ/一時ファイル/クリップボード等の管理・削除方針。
- その他ユーザーデータ: ログ、画像、添付ファイル等の管理・暗号化方針。
-->

### 通信の暗号化

<!--
- すべての通信はHTTPS（TLS1.2以上）等の暗号化通信を強制。
- 証明書ピンニングの有無、API通信の暗号化方式、サーバー証明書の管理方針も記載。
- 例: 「アプリと外部との通信は、HTTPS等の暗号化通信を用いる」
-->

- アプリと外部との通信は、HTTPS等の暗号化通信を用いる。

### 永続データ

<!--
- 端末内に保存するデータの種類、暗号化有無、アクセス制御方針を明記。
- 原則として端末内にデータを保存しない場合、その理由や例外も記載。
- 例: 「ユーザーID・アクセスキーのみ暗号化して保存、他はサーバー管理」
-->

- 原則的に、端末内にデータを保管しない。
- ただし、以下のデータは、永続データとして暗号化を施して、端末内ストレージに保管する。
  - ユーザーID
  - アクセスキー

- 上記のデータの他、機能実装に必要な永続データに関しては、設計時に適宜追加する。

### 一時データ

<!--
- メモリ上のデータ、キャッシュデータ、一時ファイル、クリップボード等の管理・削除方針を明記。
- ログアウト時やアプリ終了時の削除処理、HTTPS通信キャッシュの無効化等も記載。
- 例: 「ログアウト時にキャッシュ・一時データを全削除」
-->

- メモリ上のデータ、キャッシュデータなどの一時データは、適切に削除される必要がある。
- 特に、以下の処理を行う。
  - ログアウト時に一時データを削除する。
  - HTTPS通信キャッシュを無効化する。

### その他ユーザーデータ

<!--
- ログインユーザーごとのデータ（設定等）を永続化する場合の方針を明記。
- サーバーサイドで管理する場合、アプリ内ストレージには保管しない旨を記載。
- 例: 「ユーザー設定はサーバーで管理、アプリには保存しない」
-->

- ログインユーザーごとのデータ（設定等）を永続化する必要がある場合は、サーバーサイドに保持し、アプリ内のストレージには保管しない。

## 不正追跡・監視

<!--
このセクションには、不正利用の検知・監視・追跡の方針を記載します。
- 不正ログイン・不正アクセスの検知、アラート通知、監査ログの保存・分析方針等。
- アプリ内でのログ生成有無、サーバー側での監査ログ管理、分析・通知フローも明記。
- 例: 「アプリ内ログは生成せず、API呼び出し時にサーバーで記録・分析」
-->

- 以下の仕様で不正追跡・監視を行う。
  - アプリ内ログは生成しない。
  - APIの呼び出し時に自動的にサーバー内に記録される。
